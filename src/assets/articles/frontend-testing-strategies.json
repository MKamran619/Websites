{
  "id": "frontend-testing-strategies",
  "title": "Frontend Testing Strategies: Unit, Integration, and E2E",
  "excerpt": "Build a comprehensive testing strategy combining Jest, Testing Library, Cypress, and Playwright for confident frontend development.",
  "date": "Sep 2023",
  "category": "Modern Frontend",
  "readTime": 14,
  "icon": "âš¡",
  "tags": ["Testing", "Jest", "Cypress", "Playwright"],
  "featured": false,
  "author": {
    "name": "Kamran Sohail",
    "role": "Software Engineer & Consultant",
    "avatar": "KS"
  },
  "content": "<h2>The Testing Pyramid</h2><p>A balanced testing strategy combines unit tests (fast, many), integration tests (medium), and E2E tests (slow, few). Each type catches different bugs.</p><h2>Unit Testing with Jest</h2><pre><code>// Pure function test\ndescribe('calculateTotal', () => {\n  it('calculates total with tax', () => {\n    const items = [\n      { price: 100, quantity: 2 },\n      { price: 50, quantity: 1 }\n    ];\n    \n    expect(calculateTotal(items, 0.1)).toBe(275); // (200 + 50) * 1.1\n  });\n  \n  it('returns 0 for empty cart', () => {\n    expect(calculateTotal([], 0.1)).toBe(0);\n  });\n});\n\n// Mocking dependencies\njest.mock('./api');\nimport { fetchUser } from './api';\n\ndescribe('UserService', () => {\n  it('fetches and transforms user data', async () => {\n    (fetchUser as jest.Mock).mockResolvedValue({\n      id: '1',\n      first_name: 'John',\n      last_name: 'Doe'\n    });\n    \n    const user = await userService.getUser('1');\n    \n    expect(user).toEqual({\n      id: '1',\n      fullName: 'John Doe'\n    });\n  });\n});</code></pre><h2>Component Testing with Testing Library</h2><pre><code>import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\n\ndescribe('LoginForm', () => {\n  it('shows validation errors for empty fields', async () => {\n    render(<LoginForm onSubmit={jest.fn()} />);\n    \n    await userEvent.click(screen.getByRole('button', { name: /login/i }));\n    \n    expect(screen.getByText(/email is required/i)).toBeInTheDocument();\n    expect(screen.getByText(/password is required/i)).toBeInTheDocument();\n  });\n  \n  it('calls onSubmit with form data', async () => {\n    const handleSubmit = jest.fn();\n    render(<LoginForm onSubmit={handleSubmit} />);\n    \n    await userEvent.type(\n      screen.getByLabelText(/email/i),\n      'test@example.com'\n    );\n    await userEvent.type(\n      screen.getByLabelText(/password/i),\n      'password123'\n    );\n    await userEvent.click(screen.getByRole('button', { name: /login/i }));\n    \n    expect(handleSubmit).toHaveBeenCalledWith({\n      email: 'test@example.com',\n      password: 'password123'\n    });\n  });\n  \n  it('disables button while loading', async () => {\n    render(<LoginForm onSubmit={jest.fn()} isLoading />);\n    \n    expect(screen.getByRole('button', { name: /loading/i })).toBeDisabled();\n  });\n});</code></pre><h2>Angular Testing</h2><pre><code>import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule } from '@angular/common/http/testing';\n\ndescribe('UserListComponent', () => {\n  let component: UserListComponent;\n  let fixture: ComponentFixture<UserListComponent>;\n  let userService: jasmine.SpyObj<UserService>;\n  \n  beforeEach(async () => {\n    const spy = jasmine.createSpyObj('UserService', ['getUsers']);\n    \n    await TestBed.configureTestingModule({\n      imports: [UserListComponent, HttpClientTestingModule],\n      providers: [{ provide: UserService, useValue: spy }]\n    }).compileComponents();\n    \n    userService = TestBed.inject(UserService) as jasmine.SpyObj<UserService>;\n    fixture = TestBed.createComponent(UserListComponent);\n    component = fixture.componentInstance;\n  });\n  \n  it('displays users from service', async () => {\n    userService.getUsers.and.returnValue(of([\n      { id: '1', name: 'John' },\n      { id: '2', name: 'Jane' }\n    ]));\n    \n    fixture.detectChanges();\n    await fixture.whenStable();\n    \n    const items = fixture.nativeElement.querySelectorAll('.user-item');\n    expect(items.length).toBe(2);\n  });\n});</code></pre><h2>E2E Testing with Playwright</h2><pre><code>import { test, expect } from '@playwright/test';\n\ntest.describe('Authentication', () => {\n  test('user can login successfully', async ({ page }) => {\n    await page.goto('/login');\n    \n    await page.fill('[data-testid=\"email\"]', 'user@example.com');\n    await page.fill('[data-testid=\"password\"]', 'password123');\n    await page.click('[data-testid=\"submit\"]');\n    \n    await expect(page).toHaveURL('/dashboard');\n    await expect(page.locator('h1')).toHaveText('Welcome back!');\n  });\n  \n  test('shows error for invalid credentials', async ({ page }) => {\n    await page.goto('/login');\n    \n    await page.fill('[data-testid=\"email\"]', 'wrong@example.com');\n    await page.fill('[data-testid=\"password\"]', 'wrongpassword');\n    await page.click('[data-testid=\"submit\"]');\n    \n    await expect(page.locator('.error-message')).toHaveText(\n      'Invalid email or password'\n    );\n  });\n});\n\ntest.describe('Shopping Cart', () => {\n  test.beforeEach(async ({ page }) => {\n    // Login before each test\n    await page.goto('/login');\n    await page.fill('[data-testid=\"email\"]', 'user@example.com');\n    await page.fill('[data-testid=\"password\"]', 'password123');\n    await page.click('[data-testid=\"submit\"]');\n  });\n  \n  test('user can add items to cart', async ({ page }) => {\n    await page.goto('/products');\n    await page.click('[data-testid=\"add-to-cart-1\"]');\n    \n    const cartCount = page.locator('[data-testid=\"cart-count\"]');\n    await expect(cartCount).toHaveText('1');\n  });\n});</code></pre><h2>API Mocking with MSW</h2><pre><code>import { rest } from 'msw';\nimport { setupServer } from 'msw/node';\n\nconst server = setupServer(\n  rest.get('/api/users', (req, res, ctx) => {\n    return res(ctx.json([\n      { id: '1', name: 'John' },\n      { id: '2', name: 'Jane' }\n    ]));\n  }),\n  \n  rest.post('/api/login', async (req, res, ctx) => {\n    const { email, password } = await req.json();\n    \n    if (email === 'valid@example.com' && password === 'password') {\n      return res(ctx.json({ token: 'fake-token' }));\n    }\n    \n    return res(ctx.status(401), ctx.json({ error: 'Invalid credentials' }));\n  })\n);\n\nbeforeAll(() => server.listen());\nafterEach(() => server.resetHandlers());\nafterAll(() => server.close());</code></pre><h2>Testing Strategy</h2><table><tr><th>Type</th><th>Ratio</th><th>Focus</th></tr><tr><td>Unit</td><td>70%</td><td>Logic, utilities, services</td></tr><tr><td>Integration</td><td>20%</td><td>Components, hooks, state</td></tr><tr><td>E2E</td><td>10%</td><td>Critical user journeys</td></tr></table><h2>Conclusion</h2><p>Good tests give confidence to refactor and ship. Focus on testing behavior, not implementation. Use the right tool for each level of the testing pyramid.</p>"
}
