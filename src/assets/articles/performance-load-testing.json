{
  "id": "performance-load-testing",
  "title": "Load Testing: Finding Breaking Points Before Users Do",
  "excerpt": "Design and execute load tests that reveal performance bottlenecks, using tools like k6, JMeter, and Artillery for realistic traffic simulation.",
  "date": "Sep 2023",
  "category": "Performance",
  "readTime": 12,
  "icon": "âš¡",
  "tags": ["Load Testing", "k6", "Performance", "Testing"],
  "featured": false,
  "author": {
    "name": "Kamran Sohail",
    "role": "Software Engineer & Consultant",
    "avatar": "KS"
  },
  "content": "<h2>Why Load Testing?</h2><p>Load testing reveals how your system behaves under stress. It's essential for capacity planning, finding bottlenecks, and preventing production incidents.</p><h2>Types of Load Tests</h2><h3>Load Test</h3><p>Simulate expected peak load:</p><pre><code>// k6 load test\nexport const options = {\n  stages: [\n    { duration: '2m', target: 100 },  // Ramp up\n    { duration: '5m', target: 100 },  // Stay at peak\n    { duration: '2m', target: 0 },    // Ramp down\n  ],\n};</code></pre><h3>Stress Test</h3><p>Find the breaking point:</p><pre><code>export const options = {\n  stages: [\n    { duration: '2m', target: 100 },\n    { duration: '5m', target: 100 },\n    { duration: '2m', target: 200 },\n    { duration: '5m', target: 200 },\n    { duration: '2m', target: 300 },  // Keep increasing\n    { duration: '5m', target: 300 },\n  ],\n};</code></pre><h3>Spike Test</h3><p>Simulate sudden traffic surge:</p><pre><code>export const options = {\n  stages: [\n    { duration: '10s', target: 100 },\n    { duration: '1m', target: 100 },\n    { duration: '10s', target: 1000 }, // Spike!\n    { duration: '3m', target: 1000 },\n    { duration: '10s', target: 100 },\n  ],\n};</code></pre><h3>Soak Test</h3><p>Test for memory leaks and degradation:</p><pre><code>export const options = {\n  stages: [\n    { duration: '5m', target: 100 },\n    { duration: '8h', target: 100 },  // Run for hours\n    { duration: '5m', target: 0 },\n  ],\n};</code></pre><h2>Writing Realistic Tests</h2><h3>k6 Test Script</h3><pre><code>import http from 'k6/http';\nimport { check, sleep } from 'k6';\n\nexport default function() {\n  // Simulate user journey\n  const homeRes = http.get('https://api.example.com/');\n  check(homeRes, {\n    'home status 200': (r) => r.status === 200,\n    'home response time < 500ms': (r) => r.timings.duration < 500,\n  });\n  \n  sleep(1); // Think time\n  \n  const loginRes = http.post('https://api.example.com/login', {\n    email: 'test@example.com',\n    password: 'password',\n  });\n  check(loginRes, {\n    'login successful': (r) => r.status === 200,\n  });\n  \n  const token = loginRes.json('token');\n  \n  // Authenticated request\n  const profileRes = http.get('https://api.example.com/profile', {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  \n  sleep(Math.random() * 3); // Variable think time\n}</code></pre><h2>Key Metrics</h2><h3>What to Measure</h3><ul><li><strong>Response Time:</strong> p50, p95, p99</li><li><strong>Throughput:</strong> Requests per second</li><li><strong>Error Rate:</strong> Failed requests percentage</li><li><strong>Concurrent Users:</strong> Active virtual users</li></ul><h3>Thresholds</h3><pre><code>export const options = {\n  thresholds: {\n    http_req_duration: ['p(95)<500'],  // 95% under 500ms\n    http_req_failed: ['rate<0.01'],    // Less than 1% errors\n    http_reqs: ['rate>100'],           // At least 100 RPS\n  },\n};</code></pre><h2>CI/CD Integration</h2><pre><code># GitHub Actions\njobs:\n  load-test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: grafana/k6-action@v0.3.0\n        with:\n          filename: load-tests/api-test.js\n          flags: --out cloud</code></pre><h2>Analyzing Results</h2><ul><li>Compare against baseline</li><li>Identify bottlenecks (CPU, memory, database)</li><li>Correlate with application metrics</li><li>Document findings and recommendations</li></ul><h2>Conclusion</h2><p>Load testing should be part of your regular development cycle. Test early, test often, and always test before major releases.</p>"
}
