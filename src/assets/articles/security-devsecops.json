{
  "id": "security-devsecops",
  "title": "DevSecOps: Integrating Security into CI/CD Pipelines",
  "excerpt": "Shift security left by integrating SAST, DAST, dependency scanning, and compliance checks into your development and deployment workflows.",
  "date": "Nov 2023",
  "category": "Security",
  "readTime": 13,
  "icon": "ðŸ”’",
  "tags": ["DevSecOps", "CI/CD", "Security", "Automation"],
  "featured": false,
  "author": {
    "name": "Kamran Sohail",
    "role": "Software Engineer & Consultant",
    "avatar": "KS"
  },
  "content": "<h2>Why DevSecOps?</h2><p>Finding vulnerabilities in production is 100x more expensive than finding them during development. DevSecOps integrates security into every stage of the development lifecycle.</p><h2>The Security Pipeline</h2><h3>Complete GitHub Actions Pipeline</h3><pre><code>name: DevSecOps Pipeline\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\njobs:\n  security-scan:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      # Dependency vulnerability scanning\n      - name: Dependency Check\n        uses: dependency-check/Dependency-Check_Action@main\n        with:\n          path: '.'\n          format: 'HTML'\n          \n      # SAST - Static Analysis\n      - name: SonarCloud Scan\n        uses: SonarSource/sonarcloud-github-action@master\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}\n          \n      # Secret scanning\n      - name: Gitleaks\n        uses: gitleaks/gitleaks-action@v2\n        \n      # Container scanning\n      - name: Build image\n        run: docker build -t myapp:${{ github.sha }} .\n        \n      - name: Trivy vulnerability scanner\n        uses: aquasecurity/trivy-action@master\n        with:\n          image-ref: 'myapp:${{ github.sha }}'\n          severity: 'CRITICAL,HIGH'</code></pre><h2>SAST - Static Application Security Testing</h2><pre><code># SonarQube configuration (sonar-project.properties)\nsonar.projectKey=my-project\nsonar.organization=my-org\nsonar.sources=src\nsonar.tests=test\nsonar.javascript.lcov.reportPaths=coverage/lcov.info\n\n# Security rules\nsonar.issue.ignore.multicriteria=e1\nsonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S2068\nsonar.issue.ignore.multicriteria.e1.resourceKey=**/*.test.js</code></pre><h3>Custom Security Rules</h3><pre><code>// ESLint security plugin configuration\nmodule.exports = {\n  plugins: ['security'],\n  extends: ['plugin:security/recommended'],\n  rules: {\n    'security/detect-object-injection': 'error',\n    'security/detect-non-literal-regexp': 'warn',\n    'security/detect-unsafe-regex': 'error',\n    'security/detect-buffer-noassert': 'error',\n    'security/detect-eval-with-expression': 'error'\n  }\n};</code></pre><h2>DAST - Dynamic Application Security Testing</h2><pre><code># OWASP ZAP in CI pipeline\ndast:\n  stage: test\n  image: owasp/zap2docker-stable\n  script:\n    - mkdir -p /zap/wrk/\n    - zap-baseline.py -t $APP_URL -r zap_report.html\n  artifacts:\n    paths:\n      - zap_report.html</code></pre><h2>Dependency Scanning</h2><pre><code># Snyk integration\nname: Snyk Security\n\njobs:\n  snyk:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Run Snyk to check for vulnerabilities\n        uses: snyk/actions/node@master\n        env:\n          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}\n        with:\n          command: test\n          args: --severity-threshold=high</code></pre><pre><code>// package.json audit script\n{\n  \"scripts\": {\n    \"audit\": \"npm audit --production\",\n    \"audit:fix\": \"npm audit fix\",\n    \"security:check\": \"snyk test && snyk monitor\"\n  }\n}</code></pre><h2>Infrastructure as Code Security</h2><pre><code># Terraform security scanning with Checkov\nsecurity-iac:\n  stage: security\n  image: bridgecrew/checkov:latest\n  script:\n    - checkov -d ./terraform --framework terraform\n  allow_failure: false</code></pre><h2>Container Security</h2><pre><code># Dockerfile best practices\nFROM node:18-alpine AS builder\n# Use non-root user\nRUN addgroup -g 1001 -S nodejs\nRUN adduser -S nextjs -u 1001\n\n# Install dependencies only\nCOPY package*.json ./\nRUN npm ci --only=production\n\n# Copy app\nCOPY --chown=nextjs:nodejs . .\n\n# Switch to non-root user\nUSER nextjs\n\nEXPOSE 3000\nCMD [\"node\", \"server.js\"]</code></pre><h2>Security Gates</h2><pre><code>// Quality gate configuration\nconst securityGate = {\n  critical: 0,    // Zero critical vulnerabilities allowed\n  high: 5,        // Max 5 high vulnerabilities\n  medium: 20,     // Max 20 medium vulnerabilities\n  codeSmells: 50, // Max 50 code smells\n  coverage: 80    // Minimum 80% code coverage\n};\n\nfunction evaluateGate(scanResults) {\n  if (scanResults.critical > securityGate.critical) {\n    throw new Error('Critical vulnerabilities found - blocking deployment');\n  }\n  // Additional checks...\n}</code></pre><h2>Secrets Management</h2><pre><code># Pre-commit hooks for secret detection\n# .pre-commit-config.yaml\nrepos:\n  - repo: https://github.com/gitleaks/gitleaks\n    rev: v8.16.1\n    hooks:\n      - id: gitleaks</code></pre><h2>Compliance as Code</h2><pre><code># Open Policy Agent (OPA) policy\npackage kubernetes.admission\n\ndeny[msg] {\n  input.request.kind.kind == \"Deployment\"\n  not input.request.object.spec.template.spec.securityContext.runAsNonRoot\n  msg := \"Containers must not run as root\"\n}\n\ndeny[msg] {\n  input.request.kind.kind == \"Deployment\"\n  container := input.request.object.spec.template.spec.containers[_]\n  not container.resources.limits\n  msg := \"Container must have resource limits\"\n}</code></pre><h2>Conclusion</h2><p>DevSecOps is about making security everyone's responsibility. Automate security checks, fail fast, and continuously improve your security posture.</p>"
}
