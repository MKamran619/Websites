{
  "id": "security-cloud-security",
  "title": "Cloud Security Architecture: AWS, Azure, and GCP",
  "excerpt": "Design secure cloud architectures using identity management, network security, encryption, and compliance frameworks across major cloud providers.",
  "date": "Oct 2023",
  "category": "Security",
  "readTime": 14,
  "icon": "ðŸ”’",
  "tags": ["Cloud Security", "AWS", "Azure", "GCP"],
  "featured": false,
  "author": {
    "name": "Kamran Sohail",
    "role": "Software Engineer & Consultant",
    "avatar": "KS"
  },
  "content": "<h2>Shared Responsibility Model</h2><p>Cloud providers secure the infrastructure; you secure your data and configurations. Understanding this boundary is critical for cloud security.</p><h2>Identity and Access Management</h2><h3>AWS IAM Best Practices</h3><pre><code>// Least privilege IAM policy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:PutObject\"\n      ],\n      \"Resource\": \"arn:aws:s3:::my-bucket/uploads/*\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:PrincipalTag/Department\": \"Engineering\"\n        }\n      }\n    }\n  ]\n}</code></pre><h3>Azure RBAC</h3><pre><code>// Custom role definition\n{\n  \"Name\": \"App Reader\",\n  \"IsCustom\": true,\n  \"Description\": \"Read-only access to application resources\",\n  \"Actions\": [\n    \"Microsoft.Web/sites/read\",\n    \"Microsoft.Web/sites/config/read\"\n  ],\n  \"NotActions\": [],\n  \"AssignableScopes\": [\n    \"/subscriptions/{subscription-id}/resourceGroups/app-rg\"\n  ]\n}</code></pre><h2>Network Security</h2><h3>VPC Security (AWS)</h3><pre><code>// Terraform VPC with security groups\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  \n  tags = {\n    Name = \"secure-vpc\"\n  }\n}\n\nresource \"aws_security_group\" \"web\" {\n  name        = \"web-sg\"\n  description = \"Security group for web servers\"\n  vpc_id      = aws_vpc.main.id\n\n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"10.0.0.0/16\"]  // Only internal\n  }\n}</code></pre><h3>Private Endpoints</h3><pre><code>// Azure Private Endpoint for Storage\nresource \"azurerm_private_endpoint\" \"storage\" {\n  name                = \"storage-pe\"\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n  subnet_id           = azurerm_subnet.private.id\n\n  private_service_connection {\n    name                           = \"storage-connection\"\n    private_connection_resource_id = azurerm_storage_account.main.id\n    subresource_names              = [\"blob\"]\n    is_manual_connection           = false\n  }\n}</code></pre><h2>Data Encryption</h2><h3>Encryption at Rest</h3><pre><code>// AWS S3 bucket encryption\nresource \"aws_s3_bucket\" \"secure\" {\n  bucket = \"my-secure-bucket\"\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"secure\" {\n  bucket = aws_s3_bucket.secure.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.bucket_key.arn\n      sse_algorithm     = \"aws:kms\"\n    }\n    bucket_key_enabled = true\n  }\n}</code></pre><h3>Encryption in Transit</h3><pre><code>// Enforce HTTPS on CloudFront\nresource \"aws_cloudfront_distribution\" \"cdn\" {\n  viewer_certificate {\n    acm_certificate_arn      = aws_acm_certificate.cert.arn\n    ssl_support_method       = \"sni-only\"\n    minimum_protocol_version = \"TLSv1.2_2021\"\n  }\n  \n  default_cache_behavior {\n    viewer_protocol_policy = \"redirect-to-https\"\n  }\n}</code></pre><h2>Secrets Management</h2><pre><code>// AWS Secrets Manager\nimport { SecretsManagerClient, GetSecretValueCommand } from '@aws-sdk/client-secrets-manager';\n\nconst client = new SecretsManagerClient({ region: 'us-east-1' });\n\nasync function getSecret(secretName) {\n  const command = new GetSecretValueCommand({ SecretId: secretName });\n  const response = await client.send(command);\n  return JSON.parse(response.SecretString);\n}\n\n// Usage\nconst dbCreds = await getSecret('prod/db/credentials');</code></pre><h2>Security Monitoring</h2><h3>AWS GuardDuty</h3><pre><code>// Enable GuardDuty with Terraform\nresource \"aws_guardduty_detector\" \"main\" {\n  enable = true\n  \n  datasources {\n    s3_logs {\n      enable = true\n    }\n    kubernetes {\n      audit_logs {\n        enable = true\n      }\n    }\n  }\n}</code></pre><h3>Azure Defender</h3><pre><code>// Enable Defender for Cloud\nresource \"azurerm_security_center_subscription_pricing\" \"defender\" {\n  tier          = \"Standard\"\n  resource_type = \"VirtualMachines\"\n}\n\nresource \"azurerm_security_center_contact\" \"security\" {\n  email               = \"security@company.com\"\n  alert_notifications = true\n  alerts_to_admins    = true\n}</code></pre><h2>Compliance</h2><pre><code>// AWS Config rules for compliance\nresource \"aws_config_config_rule\" \"s3_bucket_public_read_prohibited\" {\n  name = \"s3-bucket-public-read-prohibited\"\n  \n  source {\n    owner             = \"AWS\"\n    source_identifier = \"S3_BUCKET_PUBLIC_READ_PROHIBITED\"\n  }\n}\n\nresource \"aws_config_config_rule\" \"encrypted_volumes\" {\n  name = \"encrypted-volumes\"\n  \n  source {\n    owner             = \"AWS\"\n    source_identifier = \"ENCRYPTED_VOLUMES\"\n  }\n}</code></pre><h2>Conclusion</h2><p>Cloud security requires a comprehensive approach covering identity, network, data, and monitoring. Leverage native security services and automate compliance checks.</p>"
}
