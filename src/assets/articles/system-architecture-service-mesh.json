{
  "id": "system-architecture-service-mesh",
  "title": "Service Mesh Architecture with Istio",
  "excerpt": "Implement advanced service-to-service communication, observability, and security in Kubernetes with Istio service mesh.",
  "date": "Sep 2023",
  "category": "System Architecture",
  "readTime": 13,
  "icon": "üèóÔ∏è",
  "tags": ["Service Mesh", "Istio", "Kubernetes", "Microservices"],
  "featured": false,
  "author": {
    "name": "Kamran Sohail",
    "role": "Software Engineer & Consultant",
    "avatar": "KS"
  },
  "content": "<h2>What is a Service Mesh?</h2><p>A service mesh is a dedicated infrastructure layer for handling service-to-service communication. It provides features like traffic management, security, and observability without changing application code.</p><h2>Why Service Mesh?</h2><h3>Without Service Mesh</h3><p>Each service implements its own:</p><ul><li>Retry logic</li><li>Circuit breakers</li><li>TLS certificates</li><li>Metrics collection</li><li>Distributed tracing</li></ul><h3>With Service Mesh</h3><p>The mesh handles all cross-cutting concerns, letting services focus on business logic.</p><h2>Istio Architecture</h2><h3>Data Plane</h3><p>Envoy proxy sidecars deployed alongside each service intercept all network traffic.</p><h3>Control Plane</h3><ul><li><strong>Pilot:</strong> Service discovery and traffic management</li><li><strong>Citadel:</strong> Certificate management and mTLS</li><li><strong>Galley:</strong> Configuration validation</li></ul><h2>Traffic Management</h2><h3>Virtual Services</h3><pre><code>apiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: orders\nspec:\n  hosts:\n  - orders\n  http:\n  - route:\n    - destination:\n        host: orders\n        subset: v1\n      weight: 90\n    - destination:\n        host: orders\n        subset: v2\n      weight: 10</code></pre><h3>Destination Rules</h3><pre><code>apiVersion: networking.istio.io/v1beta1\nkind: DestinationRule\nmetadata:\n  name: orders\nspec:\n  host: orders\n  trafficPolicy:\n    connectionPool:\n      http:\n        maxRequestsPerConnection: 100\n    outlierDetection:\n      consecutive5xxErrors: 5\n      interval: 30s\n      baseEjectionTime: 60s</code></pre><h2>Security</h2><h3>Mutual TLS</h3><p>Automatic encryption between all services:</p><pre><code>apiVersion: security.istio.io/v1beta1\nkind: PeerAuthentication\nmetadata:\n  name: default\nspec:\n  mtls:\n    mode: STRICT</code></pre><h3>Authorization Policies</h3><pre><code>apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: orders-policy\nspec:\n  selector:\n    matchLabels:\n      app: orders\n  rules:\n  - from:\n    - source:\n        principals: [\"cluster.local/ns/default/sa/frontend\"]</code></pre><h2>Observability</h2><h3>Automatic Metrics</h3><p>Istio generates metrics for all traffic:</p><ul><li>Request rate, latency, error rate</li><li>TCP connections and bytes</li><li>Service dependencies</li></ul><h3>Distributed Tracing</h3><p>Automatic trace context propagation with Jaeger or Zipkin integration.</p><h3>Service Visualization</h3><p>Kiali provides real-time service topology and traffic visualization.</p><h2>Best Practices</h2><ul><li>Start with observability features before traffic management</li><li>Enable mTLS gradually</li><li>Use namespaces to isolate mesh features</li><li>Monitor Istio control plane resources</li></ul><h2>Conclusion</h2><p>Service mesh adds operational complexity but provides powerful features for microservices at scale. Evaluate whether your organization needs these capabilities before adopting.</p>"
}
